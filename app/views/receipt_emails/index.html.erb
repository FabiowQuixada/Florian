
<%= render partial: "helpers/index_table", locals: {model: @model, columns: Array.[](
	Hash[:header => "day", :model_attr => 'day_of_month', :style => "width: 16px;"],
	Hash[:header => "company", :model_attr => 'company.trading_name', :class => "email_company"],
	Hash[:header => "competence", :model_attr => 'competence.capitalize', :class => "hidden-xs"],
	Hash[:header => "value", :model_attr => 'value', :style => "width: 150px;", :type => 'money']
)} %>

<%= t('helpers.email.index_footer', time: ReceiptEmail.daily_send_hour.to_s) %>

<script>

	$(document).ready(function() {
		jQuery.noConflict();
		$('.resend_btn').click(function(ev) {

			clean_resend_modal();

			id = $(this).parent().parent().find('.model_id').text();
			$('#resend_email_id').val(id);
			$('#resend_email_form').get(0).setAttribute('action', '/receipt_emails/' + id + '/resend');
			$('.modal_company_name').text($(this).parent().parent().find('.email_company').text());
			$('#resend_email_modal').modal('show');
		});

		jQuery.noConflict();
		$('.send_test_btn').click(function(ev) {

			clean_send_test_modal();

			id = $(this).parent().parent().find('.model_id').text();
			$('#send_test_email_id').val(id);
			$('#send_test_email_form').get(0).setAttribute('action', '/receipt_emails/' + id + '/send_test');
			$('.modal_company_name').text($(this).parent().parent().find('.email_company').text());
			$('#send_test_email_modal').modal('show');
		});

		jQuery.noConflict();
		$('#recent_emails_btn').click(function(ev) {
			$('#recent_emails_modal').modal('show');
		});
	});
</script>
