<%= form_for @model, html: { id: 'main_form' } do |f| %>

	<%= render 'shared/form_errors' %>

	<div class="container-fluid padless">
		<div class="row">
			<div class="col-md-3 form-group">
				<%= f.label :donation_date %>
				<div class="input-group date" data-behaviour='datepicker'>
					<%= date_field f, :donation_date %><span class="input-group-addon"><i class="glyphicon glyphicon-th"></i></span>
				</div>
			</div>
			<div class="col-md-3 form-group">
				<%= f.label :value %>
				<div class="input-group">
					<span class="input-group-addon"><%= currency %></span>
					<%= money_field f, :value %>
				</div>
			</div>

			<div class="col-md-6 form-group">
				<%= f.label :maintainer, class: 'required' %>
				<%= f.collection_select(:maintainer_id, Maintainer.all, :id, :name, { include_blank: t('helpers.select.prompt') }, { class: 'form-control', disabled: f.object.persisted? }) %>
			</div>
		</div>
	</div>

	<div class="form-group">
		<%= f.label :remark %>
		<%= f.text_area :remark, size: '24x6', class: 'form-control' %>
	</div>

	<br/>

	<div class="form-buttons">
	    <%= save_update_btn @model, f %>
	    <%= save_and_new_btn @model %>
	    <%= form_back_btn %>
	</div>

<% end #main_form %>

<%= render 'shared/form_commons' %>

<script>

	function preprocess_data() {}

	$('#create_and_new_btn').on('click', function(evt) {
		$('form').get(0).setAttribute('action', '<%= create_and_new_donations_path %>');
		$( "#main_form" ).submit();
	});

</script>